<div class="trace-editor trace-container">
  <div class="trace-header">
    <h3>Trace</h3>
    <div class="time-controls">
      <button class="time-btn" (click)="removeTime()">-</button>
      <span class="time-count">{{ traceState().length }}</span>
      <button class="time-btn" (click)="addTime()">+</button>
    </div>
  </div>
  <div class="timeline-grid">
    <div class="row header">
      <div class="label">Var / Time</div>
      @for (step of traceState(); track $index) {
        <div class="time-index" [class.active]="currentTime() === $index">
          {{ $index }}
        </div>
      }
    </div>

    @for (varName of traceVariables(); track varName) {
      <div class="row">
        <div class="label">
          {{ varName }}
          <button class="delete-var-btn" (click)="deleteVar(varName)">Ã—</button>
        </div>
        @for (step of traceState(); track $index) {
          <div 
            class="cell"
            [class.active]="currentTime() === $index"
            [class.true]="step[varName]"
            (click)="toggleStep($index, varName)">
            <div class="led"></div>
          </div>
        }
      </div>
    }
  </div>
  
  <button class="add-var-btn" (click)="addNewVariable()">+ Add Variable</button>
</div>